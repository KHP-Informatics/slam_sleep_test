<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SLAM Sleep v1.01</title>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">

<script src="app/lib/jquery-2.1.0.min.js"></script>
<script src="app/lib/lodash.min.js"></script>
<script src="app/lib/purple-robot-client.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

<style>
.btn {width:100%;}
</style>

<script>

$( document ).ready(function() {
//put yer stuff here

/* <!-- Make sure GPS information is captured every x mins, in order to integrate with accelerometer data from 1) fitbit 2) on-phone accelerometer? or other activity measuring device  
the logic here is you then don't need to specify when you are asleep as these GPS coordinates will be static when asleep and accelerometer will measure restlessness --> */

//<!-- pseudocode for location + fitbit sleep measure -->
if (PurpleRobot.probesState())  //check if Location Probe is enabled, alert to enable in PR?
{
    alert("Check Probes are enabled in Purple Robot App. \n check: Purple Robot > Probe Configuration > Enable Probes");
}

try
{
    PurpleRobot.enableProbe('edu.northwestern.cbits.purple_robot_manager.probes.builtin.LocationProbe'); //enabble Location Probe if not enabled, or direct user to enable
}
catch (err)
{
    //do something or throw
}

try
{
    obj_conf = { 'name' : 'edu.northwestern.cbits.purple_robot_manager.probes.builtin.LocationProbe', 'SAMPLING_RATE':'5' };
    PurpleRobot.updateProbe(obj_conf) // set the required option: "Sampling Rate" = 5 min, must have at least sample rate 5 mins
}
catch (err)
{
    //do something or throw
}

$(".jumbotron").html("<h3>SLAM Sleep</h3>");

});

$(".main-form").on("submit", function(ev){

	ev.preventDefault();
	PurpleRobotClient.emitReading("bed_time",$("#bed_time").val());
	PurpleRobotClient.emitReading("wake_time",$("#wake_time").val());
	PurpleRobotClient.emitReading("feeling_good_bad",$("#feeling_good_bad").val());
});





</script>

</head>

<body>
	<div class="jumbotron"></div>

	<div class="container">
		<form role="form" id="main-form">  

                        <!-- feedback simple sleep data, perhaps in first instance as a table? or graphic? -->

                        <div class="gps-group">
                        
                        <div class="form-group">
				<label>What time did you go to bed last night?</label><br/>
				<input type="time" name="bed_time" id="bed_time">
			</div>
			<div class="form-group">
				<label>What time did wake up this morning?</label><br/>
				<input type="time" name="wake_time" id="wake_time">
			</div>
			<div class="form-group">
				<label>How did you feel?</label><br/>
				<input type="range" name="feeling_good_bad" min="0" max="10" id="feeling_good_bad">
			</div>
			<button type="submit" class="btn btn-primary">Save</button>
		</form>
	</div>

</body>
</html>
